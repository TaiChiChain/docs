---
title: "节点同步"
---

AxiomLedger网络中的节点始终维护最新的区块链状态，处于网络中的各节点将定期检查状态一致性，当收到其他节点的状态时，会和自身的块高进行比较，若自身的块高落后大多数节点的块高，将开启区块同步。此外，当节点宕机重启时，或者新节点加入网络，都会进行区块同步。
AxiomLedger提供了不同的同步模式，它们在同步速度、存储要求和安全性方面存在差异。节点可针对不同的同步场景选择指定的同步模式进行区块同步。

### 全量同步

全量同步方式将从节点当前最新的区块开始，逐个下载区块数据，进行交易重放并验证，直到达到网络中最新的区块高度。该模式需要本地虚拟机执行所有的交易数据，同步完成后**该节点将拥有完整的状态数据**。所以需要较长的时间同步，并且需要消耗大量的带宽与存储空间。一般用于数据节点同步。

### 快照同步
<img src="/zh/images/nodes/snap-sync.png" width="700" />

快照同步方式不需要执行所有的交易数据，落后节点会从网络中获取指定高度的状态快照，以状态快照的高度为检查点，在该高度之后的区块数据通过全量同步方式进行同步，在该高度之前的区块数据与交易回执数据只从指定可信的节点集合进行下载并存储，该模式不需要在本地虚拟机执行检查点之前的交易，因此可以节省大量的时间与存储空间，但是其安全性取决于检查点状态快照的可信性与完整性，因此需要注意选择可信的节点集合。同时，**该模式不支持检查点之前进行历史状态数据查询，因此数据节点不能使用该模式进行同步**，一般用于全节点同步。
