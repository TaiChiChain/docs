---
title: "Gas与费用"
---

为防止DDoS（Distributed Denial of Service）攻击，所有改变区块链账本状态（非只读）的交易执行都需要消耗一定数量的Gas。`AxiomLedger` Gas费的计算与以太坊的计算方式类似。

## 基本概念

Gas是一个区块链中常见的模式。Gas设置的初衷是防止用户对区块链系统的DDoS攻击。Gas模型有点类似云计算平台，但是云计算平台的使用是以时间为单位进行付费，而区块链系统则是以消耗的计算资源为单位进行计费：

$$\text{Gas Fee}=\text{Gas Used} \times \text{Gas Price}$$

其中，`Gas Fee`是一个用户需要为一笔交易支付的总费用，`Gas Used`是执行用户交易时消耗的计算资源，`Gas Price`是每个计算资源单位的价格。

## Gas限制

一些智能合约因为编写不当，可能会存在死循环。为了防止此类死循环消耗过多的Gas，用户可以手动设置一笔交易执行的Gas上限，否则`AxiomLedger`将会自动设置gas上限为100000000。

<Warning> 提示：用户手动设置Gas上限超过$10^8$，那么这个设置会被忽略，Gas上限仍然以$10^8$记录。</Warning>

## 自动调节的Gas费机制

在我们的系统中，Gas不仅是一个防止DDoS攻击的手段，同时也可以动态的调节网络情况。我们把这种调节机制称为动态Gas价格模型。

动态Gas价格模型的算法如下：

![dynamic_gas_price](../../images/dynamic_gas_price.png)

这个算法的基本想法是，当前区块的Gas价格会随着父区块的情况进行变化，具体而言，会随着父区块打包的交易数占区块允许交易数上线的比重进行线性浮动，
最大浮动12.5%。

## Gas价格边界

为了保证Gas价格在一个合理的区间内浮动，我们会设置Gas价格的上下界。在测试网中，上界为10000 `GMol`，而下界为1000 `GMol`。

在初始状态中，Gas价格被设置为5000 `GMol`。
